(function(a){function r(a,b,d){var e=a.find(d=="left"?".bgr":".bgl"),d=e.find(".arr"),j=e.find(".tpad"),f=e.find(".bpad");a.height();a.find(".hd").outerHeight();a.find(".ft").outerHeight();var h,g,a=e.height();b=="center"?(h=Math.round(0.5*(a-d.height())),g=a-h-d.height()):b=="bottom"?(h=0,g=a-d.height()):b=="top"&&(h=a-d.height(),g=0);j.height(h);f.height(g);d.b({top:h,bottom:g})}function s(a,b,d){var e=a.find(b=="bottom"?".hd":".ft"),b=e.find(".arr"),j=e.find(".lpad"),f=e.find(".rpad"),h=e.find(".lft").width(),
e=e.find(".rt").width(),a=a.width(),g,k;d=="center"?g=k=0.5*(a-h-e-b.width()):d=="right"?(g=0,k=a-h-e-b.width()):d=="left"&&(g=a-h-e-b.width(),k=0);j.width(g);f.width(k);b.b({left:g+h,right:k+e})}function t(c){c.find(".hd .arr, .ft .arr").b({width:"0px"});c.find(".bgl .arr, .bgr .arr").b({height:"0px"});a.l(["top","bottom"],function(){s(c,this,"center")});a.l(["left","right"],function(){r(c,"center",this)})}var o={padding:15,k:"body",i:"<div class='popover'>               <div class='hd'>                 <div class='title'></div>                 <div class='lft'></div>                 <div class='pad lpad'></div>                 <div class='arr'></div>                 <div class='pad rpad'></div>                 <div class='rt'></div>               </div>               <div class='bd'>                 <div class='bgl'>                   <div class='tpad'></div>                   <div class='arr'></div>                   <div class='bpad'></div>                 </div>                 <div class='bgr'>                   <div class='tpad'></div>                   <div class='arr'></div>                   <div class='bpad'></div>                 </div>                 <div class='content'></div>               </div>               <div class='ft'>                 <div class='lft'></div>                 <div class='pad lpad'></div>                 <div class='arr'></div>                 <div class='pad rpad'></div>                 <div class='rt'></div>               </div>             </div>"};
a.extend(a,{a:{c:function(c){c&&(o=a.extend(o,c));return o},q:function(c,b){var d=a(a.a.c().i),e=a(b);d.e("id","popover_"+(new Date).getTime());d.b({position:"absolute",left:-9999,zIndex:1E4}).k(a.a.c().k).find(".content").i(e);e.show();c&&c.length>0?d.n("titled").find(".title").i(c):d.j("titled");a.a.t(d,e);d.f().b({left:0});return d},bind:function(){a("[data-popover]").l(function(){var c=a(this),b=c.e("data-popover"),d=c.e("data-popover-title"),e;a(d).length>0&&(d=a(d));a(b).length>0&&(b=a(b));
b.length>0&&(b.j&&b.j("hidden"),e=a.a.q(d,b),c.e("data-popover-id",e.e("id")),c.bind("click",function(b){b.preventDefault();b.stopPropagation();a.a.u(c,e)}))})},u:function(c,b,d){a.a.f();b.show();a.a.position(c,b,d);c.n("active");a(window).d("resize.popover").bind("resize.popover",function(){a.a.position(c,b)});a(window).d("scroll.popover").bind("scroll.popover",function(){a.a.position(c,b)});setTimeout(function(){function d(e){a(e.target).m(":not(.popover, .popover *)")&&(a("body").d(".hide-popover"),
a.a.f(c,b));return true}a("body").d(".hide-popover").bind("click.hide-popover",d).bind("touchstart.hide-popover",d)},1);b.find("a").d(".popover").bind("click.popover",function(){if(!a(this).m(".inpopover"))return a.a.f(c,b),b.find("a").d(".popover"),true});b.find("form").d(".popover").bind("submit.popover",function(){if(!a(this).m(".inpopover"))return a.a.f(c,b),b.find("form").d(".popover"),true});a(c).h(a.g("popoverReveal",{a:b}))},f:function(c,b,d){c=c||a("[data-popover]");b=b||a(".popover:not(.permanent)");
c.j("active");d=d||{};a(window).d("resize.popover").d("scroll.popover");if(!a.z(d.complete))d.complete=function(){};a.B.opacity?b.v(250,function(){a(c).h(a.g("popoverHide",{a:b}));d.complete.call(b)}):(b.f(),d.complete.call(b),a(c).h(a.g("popoverHide",{a:b})))},remove:function(c,b){a.a.f(c,b,{complete:function(){a(this).remove();a(c).h(a.g("popoverRemove",{a:b}))}})},t:function(c,b,d){var e=c.find(".ft"),j=c.find(".hd"),f=j.find(".lft").width(),h=j.find(".rt").width(),g=j.find(".arr"),k=c.find(".content").position(),
f=Math.max(g.width()+f+h,b.outerWidth()+2*k.left),e=b.outerHeight()+j.height()+e.height(),d=d||{};d.o||d.p>0?c.o({height:e,width:f},d.p||250):(c.height(e),c.width(f));a(window).h(a.g("popoverResize",{content:b,a:c,options:d}))},position:function(c,b,d){var d=d||{},e=d.A||c.e("data-popover-orient");if(e&&e.charAt(0)=="v"){var j=d,f=c.r(),h=b.outerHeight(),g=b.outerWidth(),e=c.outerWidth(),k=c.outerHeight(),o=a(window).scrollTop()+a.a.c().padding+a(window).height()-a.a.c().padding,q=a(window).scrollLeft()+
a.a.c().padding,m=q+a(window).width()-a.a.c().padding,j=j.s||c.e("data-popover-pos"),i,l,p,n;j&&(j=j.split(","),l=a.trim(j[0]),i=a.trim(j[1]));i||(i=f.top+k*0.5+h*0.5>o?"top":"bottom");i=="bottom"?(f.top+=c.outerHeight()*0.5,p=b.find(".hd .lft").width(),n=b.find(".hd .arr")):i=="top"&&(f.top-=h,p=b.find(".ft .lft").width(),n=b.find(".ft .arr"));t(b);n.b({width:n.b("max-width")});l||(l=f.left+e*0.5+g*0.5>m?"left":f.left+e*0.5-g*0.5<q?"right":"center");if(l=="left")f.left=f.left+e*0.5-g+n.width()*0.5+
p;else if(l=="right")f.left=f.left+e*0.5-n.width()*0.5-p;else if(l=="center")f.left=f.left+e*0.5-g*0.5;s(b,i,l);b.b(f)}else{m=d;i=c.r();l=b.outerHeight();p=b.outerWidth();n=c.outerWidth();e=c.outerHeight();k=a(window).scrollTop()+a.a.c().padding;o=k+a(window).height()-a.a.c().padding;q=a(window).scrollLeft()+a.a.c().padding+a(window).width()-a.a.c().padding;m=m.s||c.e("data-popover-pos");b.find(".hd").outerHeight();j=b.find(".ft").outerHeight();m&&(m=m.split(","),h=a.trim(m[0]),f=a.trim(m[1]));h||
(h=i.left+n+p>q?"left":"right");if(h=="left")g=b.find(".bgr .arr"),i.left=i.left-p+g.width()*0.5;else if(h=="right")g=b.find(".bgl .arr"),i.left=i.left+n-g.width()*0.5;t(b);g.b({height:g.b("max-height")});f||(f=i.top-l*0.5<k?"bottom":i.top+l*0.5>o?"top":"center");if(f=="bottom")i.top=i.top-b.find(".hd").height()-0.5*g.height();else if(f=="top")i.top=i.top-l+j+g.height()*0.5+e*0.5;else if(f=="center")i.top=i.top-b.find(".hd").height()-0.5*b.find(".bgl").outerHeight();r(b,f,h);b.b(i)}a(c).h(a.g("popoverPosition",
{a:b,options:d}))}}});a.w.a=function(c,b){return a.a.show(a(this),c,b)}})(jQuery);
